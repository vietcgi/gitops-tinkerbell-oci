# Port 8080: iPXE handoff scripts and Ubuntu images
server {
    listen 8080;
    server_name 108.181.38.67;

    root /var/www/html;
    index index.html;

    location / {
        try_files $uri $uri/ =404;
    }

    # Serve .ipxe files as plain text
    location ~ \.ipxe$ {
        add_header Content-Type text/plain;
    }
}

# Port 8081: OS images and Harvester PXE files
server {
    listen 8081;
    server_name 108.181.38.67;

    # Root for Ubuntu images (noble-bnx2.raw.gz, etc) and Harvester files
    # Files are in /var/www/ so /harvester/ maps to /var/www/harvester/
    root /var/www;
    autoindex on;

    location / {
        try_files $uri $uri/ =404;
    }
}
